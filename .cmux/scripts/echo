#!/usr/bin/env bash
# Description: Echo arguments demo - shows how to access script arguments
set -euo pipefail

# Check if arguments were provided
if [ $# -eq 0 ]; then
  cat >> "$CMUX_OUTPUT" << 'EOF'
## âš ï¸ No Arguments Provided

Usage: `/s echo <message...>`

Example: `/s echo hello world`
EOF
  exit 0
fi

# Access arguments using standard bash positional parameters
# $1 = first arg, $2 = second arg, $@ = all args, $# = number of args

cat >> "$CMUX_OUTPUT" << EOF
## ðŸ”Š Echo Script

**You said:** $@

**Arguments received:**
- Count: $# arguments
- First arg: ${1:-none}
- Second arg: ${2:-none}
- All args: $@

**Individual arguments:**
EOF

# Loop through each argument
for i in $(seq 1 $#); do
  echo "- Arg $i: ${!i}" >> "$CMUX_OUTPUT"
done

# Optionally send a message to the agent
if [ $# -gt 3 ]; then
  cat >> "$CMUX_PROMPT" << EOF
The user passed more than 3 arguments to the echo script. They seem to be testing the argument passing feature extensively!
EOF
fi
